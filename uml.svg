<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 5.0.0 (20220707.1540)
 -->
<!-- Title: UmlClassDiagram Pages: 1 -->
<svg width="2032pt" height="914pt"
 viewBox="0.00 0.00 2032.32 914.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 910.4)">
<title>UmlClassDiagram</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-910.4 2028.32,-910.4 2028.32,4 -4,4"/>
<!-- 0 -->
<g id="node1" class="node">
<title>0</title>
<polygon fill="#f2f2f2" stroke="black" points="800.62,-171.1 800.62,-287.9 1267.31,-287.9 1267.31,-171.1 800.62,-171.1"/>
<text text-anchor="middle" x="1033.96" y="-271.3" font-family="Times,serif" font-size="14.00">&lt;&lt;Abstract&gt;&gt;</text>
<text text-anchor="middle" x="1033.96" y="-254.5" font-family="Times,serif" font-size="14.00">StakingAdmin</text>
<polyline fill="none" stroke="black" points="800.62,-246.3 1267.31,-246.3 "/>
<text text-anchor="start" x="808.62" y="-229.7" font-family="Times,serif" font-size="14.00">External:</text>
<text text-anchor="start" x="808.62" y="-212.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;setInputFeeRate(_inputFeeRate: uint256) &lt;&lt;onlyOwner&gt;&gt;</text>
<text text-anchor="start" x="808.62" y="-196.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;setOutputFeeRate(_outputFeeRate: uint256) &lt;&lt;onlyOwner&gt;&gt;</text>
<text text-anchor="start" x="808.62" y="-179.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;withdrawFees(recipient: address) &lt;&lt;onlyOwner, notZeroAddress, validFee&gt;&gt;</text>
</g>
<!-- 2 -->
<g id="node3" class="node">
<title>2</title>
<polygon fill="#f2f2f2" stroke="black" points="0,-429.7 0,-563.3 353.93,-563.3 353.93,-429.7 0,-429.7"/>
<text text-anchor="middle" x="176.96" y="-546.7" font-family="Times,serif" font-size="14.00">&lt;&lt;Abstract&gt;&gt;</text>
<text text-anchor="middle" x="176.96" y="-529.9" font-family="Times,serif" font-size="14.00">StakingModifiers</text>
<polyline fill="none" stroke="black" points="0,-521.7 353.93,-521.7 "/>
<text text-anchor="start" x="8" y="-505.1" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="8" y="-488.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;modifier&gt;&gt; amountGreaterThanZero(amount: uint256)</text>
<text text-anchor="start" x="8" y="-471.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;modifier&gt;&gt; hasEnoughShares(shares: uint256)</text>
<text text-anchor="start" x="8" y="-454.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;modifier&gt;&gt; notZeroAddress(addr: address)</text>
<text text-anchor="start" x="8" y="-437.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;modifier&gt;&gt; validFee(fee: uint256)</text>
</g>
<!-- 0&#45;&gt;2 -->
<g id="edge4" class="edge">
<title>0&#45;&gt;2</title>
<path fill="none" stroke="black" d="M800.34,-248.35C638.42,-263.52 438.81,-288.57 362.96,-324.4 321.26,-344.1 282.45,-376.47 251.18,-407.79"/>
<polygon fill="none" stroke="black" points="243.42,-400.71 230.3,-429.66 258.61,-415.21 243.42,-400.71"/>
</g>
<!-- 3 -->
<g id="node4" class="node">
<title>3</title>
<polygon fill="#f2f2f2" stroke="black" points="371.96,-438.1 371.96,-554.9 777.97,-554.9 777.97,-438.1 371.96,-438.1"/>
<text text-anchor="middle" x="574.96" y="-538.3" font-family="Times,serif" font-size="14.00">&lt;&lt;Abstract&gt;&gt;</text>
<text text-anchor="middle" x="574.96" y="-521.5" font-family="Times,serif" font-size="14.00">StakingProxy</text>
<polyline fill="none" stroke="black" points="371.96,-513.3 777.97,-513.3 "/>
<text text-anchor="start" x="379.96" y="-496.7" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="379.96" y="-479.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_authorizeUpgrade(newImplementation: address) &lt;&lt;onlyOwner&gt;&gt;</text>
<text text-anchor="start" x="379.96" y="-463.1" font-family="Times,serif" font-size="14.00">External:</text>
<text text-anchor="start" x="379.96" y="-446.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;version(): string</text>
</g>
<!-- 0&#45;&gt;3 -->
<g id="edge2" class="edge">
<title>0&#45;&gt;3</title>
<path fill="none" stroke="black" d="M861.65,-287.93C835.99,-298.78 810.34,-310.98 786.96,-324.4 741.49,-350.51 695.65,-386.09 658.28,-418.04"/>
<polygon fill="none" stroke="black" points="651.28,-410.21 635.62,-437.86 665.11,-426.02 651.28,-410.21"/>
</g>
<!-- 4 -->
<g id="node5" class="node">
<title>4</title>
<polygon fill="#f2f2f2" stroke="black" points="795.78,-324.9 795.78,-668.1 1272.14,-668.1 1272.14,-324.9 795.78,-324.9"/>
<text text-anchor="middle" x="1033.96" y="-651.5" font-family="Times,serif" font-size="14.00">&lt;&lt;Abstract&gt;&gt;</text>
<text text-anchor="middle" x="1033.96" y="-634.7" font-family="Times,serif" font-size="14.00">StakingState</text>
<polyline fill="none" stroke="black" points="795.78,-626.5 1272.14,-626.5 "/>
<text text-anchor="start" x="803.78" y="-609.9" font-family="Times,serif" font-size="14.00">Private:</text>
<text text-anchor="start" x="803.78" y="-593.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;__gap: uint256[50]</text>
<text text-anchor="start" x="803.78" y="-576.3" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="803.78" y="-559.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;stakingVault: IERC4626</text>
<text text-anchor="start" x="803.78" y="-542.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;token: IERC20</text>
<text text-anchor="start" x="803.78" y="-525.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;inputFeeRate: uint256</text>
<text text-anchor="start" x="803.78" y="-509.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;outputFeeRate: uint256</text>
<text text-anchor="start" x="803.78" y="-492.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;MAX_FEE_RATE: uint256</text>
<text text-anchor="start" x="803.78" y="-475.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;accumulatedFees: uint256</text>
<polyline fill="none" stroke="black" points="795.78,-467.3 1272.14,-467.3 "/>
<text text-anchor="start" x="803.78" y="-450.7" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="803.78" y="-433.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_calculateFeeAmount(assets: uint256, feeRate: uint256): (feeAmount: uint256)</text>
<text text-anchor="start" x="803.78" y="-417.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_calculateFeeAssets(assets: uint256, feeAmount: uint256): (netAssets: uint256)</text>
<text text-anchor="start" x="803.78" y="-400.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_applyInputFee(assets: uint256): (netAssets: uint256)</text>
<text text-anchor="start" x="803.78" y="-383.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_applyOutputFee(assets: uint256): (netAssets: uint256)</text>
<text text-anchor="start" x="803.78" y="-366.7" font-family="Times,serif" font-size="14.00">External:</text>
<text text-anchor="start" x="803.78" y="-349.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;totalUserAssets(user: address): uint256</text>
<text text-anchor="start" x="803.78" y="-333.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;totalAssets(): uint256</text>
</g>
<!-- 0&#45;&gt;4 -->
<g id="edge3" class="edge">
<title>0&#45;&gt;4</title>
<path fill="none" stroke="black" d="M1033.96,-288C1033.96,-290.13 1033.96,-292.29 1033.96,-294.49"/>
<polygon fill="none" stroke="black" points="1023.46,-294.74 1033.96,-324.74 1044.46,-294.74 1023.46,-294.74"/>
</g>
<!-- 5 -->
<g id="node6" class="node">
<title>5</title>
<polygon fill="#f2f2f2" stroke="black" points="1061.36,-705.1 1061.36,-905.9 1538.56,-905.9 1538.56,-705.1 1061.36,-705.1"/>
<text text-anchor="middle" x="1299.96" y="-889.3" font-family="Times,serif" font-size="14.00">&lt;&lt;Interface&gt;&gt;</text>
<text text-anchor="middle" x="1299.96" y="-872.5" font-family="Times,serif" font-size="14.00">Events</text>
<polyline fill="none" stroke="black" points="1061.36,-864.3 1538.56,-864.3 "/>
<text text-anchor="start" x="1069.36" y="-847.7" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="1069.36" y="-830.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; Stake(user: address, assets: uint256, shares: uint256)</text>
<text text-anchor="start" x="1069.36" y="-814.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; Unstake(user: address, shares: uint256, assets: uint256)</text>
<text text-anchor="start" x="1069.36" y="-797.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; StakingVaultSet(stakingVault: IERC4626, token: IERC20)</text>
<text text-anchor="start" x="1069.36" y="-780.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; InputFeeCollected(feeAmount: uint256)</text>
<text text-anchor="start" x="1069.36" y="-763.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; OutputFeeCollected(feeAmount: uint256)</text>
<text text-anchor="start" x="1069.36" y="-746.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; InputFeeRateUpdated(oldFeeRate: uint256, newFeeRate: uint256)</text>
<text text-anchor="start" x="1069.36" y="-730.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; OutputFeeRateUpdated(oldFeeRate: uint256, newFeeRate: uint256)</text>
<text text-anchor="start" x="1069.36" y="-713.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; FeesWithdrawn(recipient: address, amount: uint256)</text>
</g>
<!-- 0&#45;&gt;5 -->
<g id="edge5" class="edge">
<title>0&#45;&gt;5</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M1244.11,-288.02C1258.19,-298.23 1270.78,-310.25 1280.96,-324.4 1322.03,-381.5 1317.24,-571.7 1309.18,-694.87"/>
<polygon fill="black" stroke="black" points="1305.68,-694.88 1308.5,-705.09 1312.66,-695.35 1305.68,-694.88"/>
</g>
<!-- 6 -->
<g id="node7" class="node">
<title>6</title>
<polygon fill="#f2f2f2" stroke="black" points="1327.99,-438.1 1327.99,-554.9 1609.94,-554.9 1609.94,-438.1 1327.99,-438.1"/>
<text text-anchor="middle" x="1468.96" y="-538.3" font-family="Times,serif" font-size="14.00">&lt;&lt;Interface&gt;&gt;</text>
<text text-anchor="middle" x="1468.96" y="-521.5" font-family="Times,serif" font-size="14.00">IStakingAdmin</text>
<polyline fill="none" stroke="black" points="1327.99,-513.3 1609.94,-513.3 "/>
<text text-anchor="start" x="1335.99" y="-496.7" font-family="Times,serif" font-size="14.00">External:</text>
<text text-anchor="start" x="1335.99" y="-479.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&#160;setInputFeeRate(_inputFeeRate: uint256)</text>
<text text-anchor="start" x="1335.99" y="-463.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&#160;setOutputFeeRate(_outputFeeRate: uint256)</text>
<text text-anchor="start" x="1335.99" y="-446.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&#160;withdrawFees(recipient: address)</text>
</g>
<!-- 0&#45;&gt;6 -->
<g id="edge1" class="edge">
<title>0&#45;&gt;6</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M1244.78,-287.95C1268.99,-298.36 1292.62,-310.44 1313.96,-324.4 1350.45,-348.26 1383.92,-382.74 1410.34,-414.5"/>
<polygon fill="none" stroke="black" points="1402.19,-421.12 1429.1,-438.03 1418.61,-408.03 1402.19,-421.12"/>
</g>
<!-- 1 -->
<g id="node2" class="node">
<title>1</title>
<polygon fill="#f2f2f2" stroke="black" points="1251.6,-0.5 1251.6,-134.1 2024.32,-134.1 2024.32,-0.5 1251.6,-0.5"/>
<text text-anchor="middle" x="1637.96" y="-117.5" font-family="Times,serif" font-size="14.00">StakingManager</text>
<polyline fill="none" stroke="black" points="1251.6,-109.3 2024.32,-109.3 "/>
<text text-anchor="start" x="1259.6" y="-92.7" font-family="Times,serif" font-size="14.00">External:</text>
<text text-anchor="start" x="1259.6" y="-75.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;stake(assets: uint256) &lt;&lt;amountGreaterThanZero, nonReentrant&gt;&gt;</text>
<text text-anchor="start" x="1259.6" y="-59.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;unstake(shares: uint256) &lt;&lt;amountGreaterThanZero, hasEnoughShares, nonReentrant&gt;&gt;</text>
<text text-anchor="start" x="1259.6" y="-42.3" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="1259.6" y="-25.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;constructor()</text>
<text text-anchor="start" x="1259.6" y="-8.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;initialize(_stakingVault: IERC4626, name: string, symbol: string, owner: address) &lt;&lt;initializer, notZeroAddress, notZeroAddress&gt;&gt;</text>
</g>
<!-- 1&#45;&gt;0 -->
<g id="edge7" class="edge">
<title>1&#45;&gt;0</title>
<path fill="none" stroke="black" d="M1389.68,-134.15C1353.31,-143.8 1315.87,-153.73 1279.56,-163.36"/>
<polygon fill="none" stroke="black" points="1276.69,-153.26 1250.39,-171.1 1282.07,-173.56 1276.69,-153.26"/>
</g>
<!-- 1&#45;&gt;5 -->
<g id="edge8" class="edge">
<title>1&#45;&gt;5</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M1644.5,-134.18C1656.79,-271.68 1677.16,-583.5 1618.96,-668.6 1600.49,-695.62 1575.47,-717.29 1547.52,-734.67"/>
<polygon fill="black" stroke="black" points="1545.53,-731.78 1538.75,-739.92 1549.13,-737.78 1545.53,-731.78"/>
</g>
<!-- 7 -->
<g id="node8" class="node">
<title>7</title>
<polygon fill="#f2f2f2" stroke="black" points="1665.59,-179.5 1665.59,-279.5 1836.34,-279.5 1836.34,-179.5 1665.59,-179.5"/>
<text text-anchor="middle" x="1750.96" y="-262.9" font-family="Times,serif" font-size="14.00">&lt;&lt;Interface&gt;&gt;</text>
<text text-anchor="middle" x="1750.96" y="-246.1" font-family="Times,serif" font-size="14.00">IStakingManager</text>
<polyline fill="none" stroke="black" points="1665.59,-237.9 1836.34,-237.9 "/>
<text text-anchor="start" x="1673.59" y="-221.3" font-family="Times,serif" font-size="14.00">External:</text>
<text text-anchor="start" x="1673.59" y="-204.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&#160;stake(assets: uint256)</text>
<text text-anchor="start" x="1673.59" y="-187.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&#160;unstake(shares: uint256)</text>
</g>
<!-- 1&#45;&gt;7 -->
<g id="edge6" class="edge">
<title>1&#45;&gt;7</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M1684.58,-134.38C1689.29,-141.06 1694.09,-147.88 1698.86,-154.63"/>
<polygon fill="none" stroke="black" points="1690.33,-160.75 1716.2,-179.21 1707.49,-148.65 1690.33,-160.75"/>
</g>
<!-- 4&#45;&gt;5 -->
<g id="edge9" class="edge">
<title>4&#45;&gt;5</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M1182.13,-668.5C1190.52,-678.19 1198.82,-687.77 1206.91,-697.11"/>
<polygon fill="black" stroke="black" points="1204.46,-699.62 1213.65,-704.89 1209.75,-695.04 1204.46,-699.62"/>
</g>
</g>
</svg>
